<div class="col-lg-12">
    <div class="card card-outline card-primary">
        <div class="card-header">
            <h5 class="card-title mt-2">Website Information</h5>
        </div>
        <form action="" id="form-update-system">
            <div class="card-body">
                <div id="msg" class="form-group"></div>
                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="name" class="control-label">Website Name</label>
                            <input type="text" class="form-control pbrc-name" id="website-name" name="name" value="" required>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="short_name" class="control-label">Website Short Name</label>
                            <input type="text" class="form-control pbrc-short-name" name="" id="website-short-name" value="" required>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="" class="control-label">Welcome Content</label>
                    <textarea name="welcome_content" cols="30" rows="2" class="form-control summernote" id="website-tagline" required></textarea>
                </div>

                <div class="form-group">
                    <label for="" class="control-label">About Us</label>
                    <textarea name="about_us" cols="30" rows="2" id="website-about-us-description" class="form-control summernote" required></textarea>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="contact" class="control-label"> Contact Number</label>
                            <input type="text" class="form-control pbrc-phone" name="contact" id="website-contact-number" value="" required>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label for="email" class="control-label"> Contact Email</label>
                            <input type="email" class="form-control pbrc-email" name="email" id="website-contact-email" value="" required>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label for="address" class="control-label"> Address</label>
                            <textarea name="address" id="website-address" cols="30" rows="2" class="form-control pbrc-address" required></textarea>
                        </div>
                    </div>
                </div>

                <label for="address" class="control-label mt-4">Operation Hours</label>
                <hr>
                <div class="row">
                    <div class="col-lg-3">
                        <div class="form-group">
                            <label for="address" class="control-label">Start Day</label>
                            <select name="" class="form-control pbrc-operating-day-start" required>
                                <option name="Sunday">Sunday</option>
                                <option name="Monday">Monday</option>
                                <option name="Tuesday">Tuesday</option>
                                <option name="Wednesday">Wednesday</option>
                                <option name="Thursday">Thursday</option>
                                <option name="Friday">Friday</option>
                                <option name="Saturday">Saturday</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group">
                            <label for="address" class="control-label">Start Time</label>
                            <select name="" class="form-control pbrc-operating-hour-start" required>
                                <option name="8:00 AM">8:00 AM</option>
                                <option name="8:30 AM">8:30 AM</option>
                                <option name="9:00 AM">9:00 AM</option>
                                <option name="9:30 AM">9:30 AM</option>
                                <option name="10:00 AM">10:00 AM</option>
                                <option name="10:30 AM">10:30 AM</option>
                                <option name="11:00 AM">11:00 AM</option>
                                <option name="11:30 AM">11:30 AM</option>
                                <option name="12:00 PM">12:00 PM</option>
                                <option name="12:30 PM">12:30 PM</option>

                                <option name="1:00 PM">1:00 PM</option>
                                <option name="1:30 PM">1:30 PM</option>
                                <option name="2:00 PM">2:00 PM</option>
                                <option name="2:30 PM">2:30 PM</option>
                                <option name="3:00 PM">3:00 PM</option>
                                <option name="3:30 PM">3:30 PM</option>
                                <option name="4:00 PM">4:00 PM</option>
                                <option name="5:30 PM">4:30 PM</option>
                                <option name="5:00 PM">5:00 PM</option>
                                <option name="5:30 PM">5:30 PM</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group">
                            <label for="address" class="control-label">End Day</label>
                            <select name="" class="form-control pbrc-operating-day-end" required>
                                <option name="Sunday">Sunday</option>
                                <option name="Monday">Monday</option>
                                <option name="Tuesday">Tuesday</option>
                                <option name="Wednesday">Wednesday</option>
                                <option name="Thursday">Thursday</option>
                                <option name="Friday">Friday</option>
                                <option name="Saturday">Saturday</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="form-group">
                            <label for="address" class="control-label">End Time</label>
                            <select name="" id="" class="form-control pbrc-operating-hour-end" required>
                                <option name="8:00 AM">8:00 AM</option>
                                <option name="8:30 AM">8:30 AM</option>
                                <option name="9:00 AM">9:00 AM</option>
                                <option name="9:30 AM">9:30 AM</option>
                                <option name="10:00 AM">10:00 AM</option>
                                <option name="10:30 AM">10:30 AM</option>
                                <option name="11:00 AM">11:00 AM</option>
                                <option name="11:30 AM">11:30 AM</option>
                                <option name="12:00 PM">12:00 PM</option>
                                <option name="12:30 PM">12:30 PM</option>

                                <option name="1:00 PM">1:00 PM</option>
                                <option name="1:30 PM">1:30 PM</option>
                                <option name="2:00 PM">2:00 PM</option>
                                <option name="2:30 PM">2:30 PM</option>
                                <option name="3:00 PM">3:00 PM</option>
                                <option name="3:30 PM">3:30 PM</option>
                                <option name="4:00 PM">4:00 PM</option>
                                <option name="5:30 PM">4:30 PM</option>
                                <option name="5:00 PM">5:00 PM</option>
                                <option name="5:30 PM">5:30 PM</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary mt-4" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleContainer" aria-expanded="false" aria-controls="collapsibleContainer">
                    Website Images
                  </button>

                <div class="container collapse" id="collapsibleContainer">
                    <div class="row mt-3">
                        <!-- Website Logo -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label for="" class="control-label">Website Logo</label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input rounded-circle" id="pbrc-logo-file" name="logo">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                            </div>
                            <div class="form-group d-flex justify-content-center mt-0 pt-0">
                                <img src="" alt="" class="img-fluid img-thumbnail pbrc-logo mt-0 pt-0" style="max-width: 200px; max-height: 200px;" loading="lazy">
                            </div>
                        </div>

                        <!-- Login Image -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label for="" class="control-label">Login Image</label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input rounded-circle" id="website-login-image-file" name="cover">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                            </div>
                            <div class="form-group d-flex justify-content-center m-0 p0-0">
                                <img src="" alt="" id="website-login-image" class="m-0 p0-0 img-fluid" style="max-width: 200px; max-height: 200px;" loading="lazy">
                            </div>
                        </div>

                        <!-- Website Cover -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label for="" class="control-label">Website Cover</label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input rounded-circle" id="website-cover-file" name="cover">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                            </div>
                            <div class="form-group d-flex justify-content-center mt-0 pt-0">
                                <img src="" alt="" id="website-cover" class="mt-0 pt-0 img-fluid" style="max-width: 200px; max-height: 200px;" loading="lazy">
                            </div>
                        </div>

                        <!-- About Us Image -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label for="" class="control-label">About Us Image</label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input rounded-circle" id="website-about-us-image-file" name="cover">
                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                </div>
                            </div>
                            <div class="form-group d-flex justify-content-center mt-0 pt-0">
                                <img src="" alt="" id="website-about-us-image" class="mt-0 pt-0 img-fluid" style="max-width: 200px; max-height: 200px;" loading="lazy">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="card-footer">
                <div class="d-flex flex-row-reverse bd-highlight">
                    <button type="submit" class="btn btn-sm btn-primary mx-1 px-3 py-2">Save <i class="fa fa-save"></i></button>
                    <!-- <button class="btn btn-sm btn-success mx-1 px-3 py-2">Preview <i class="fa fa-eye"></i></button> -->
                </div>
            </div>
        </form>
    </div>
</div>
<script>
    $(document).ready(function() {
        var WEBSITE_LOGO_IMAGE;
        var WEBSITE_COVER_IMAGE;
        var WEBSITE_ABOUT_US_IMAGE;
        var WEBSITE_LOGIN_IMAGE;

        populateWebsiteInformation();

        function populateWebsiteInformation() {
            $.ajax({
                url: adminRequest(GET_SYSTEM_URL + GET_WEBSITE_INFO),
                type: GET,
                cache: false,
                success: function(dataResult) {
                    var dataResult = JSON.parse(dataResult);

                    dataResult.websiteInfo.forEach(map => {
                        if (true) {
                            var key = map['key'];
                            var value = map['value'];
                            var type = map['type'];
                            if (type == "3" || type == "4") {
                                console.log(type + " **** " + key + " &&&& " + value);
                                if (key == "#pbrc-logo") {
                                    $(".pbrc-logo").attr("src", "./../../../" + value);
                                } else {
                                    $(key).attr("src", "./../../../" + value);
                                }
                            } else {
                                if (key == "#website-tagline" || key == "#website-about-us-description") {
                                    summernote(key, value);
                                } else {
                                    $(key).val(value);
                                }
                            }
                        }
                    });
                }
            });
        }

        $('#pbrc-logo-file').change(function() {
            var fileName = $(this).val();
            if (fileName) {
                var fileExtension = fileName.split('.').pop().toLowerCase();
                if (fileExtension === 'jpg' || fileExtension === 'png' || fileExtension === 'ico') {
                    console.log('Valid image file selected.');
                    $("#pbrc-logo-file").removeClass("is-invalid");
                    $(".pbrc-logo").attr("src", window.URL.createObjectURL(this.files[0]));
                    WEBSITE_LOGO_IMAGE = this.files[0];
                } else {
                    $(".pbrc-logo").removeAttr("src");
                    $("#pbrc-logo-file").addClass("is-invalid");
                    WEBSITE_LOGO_IMAGE = "";
                }
            }
        });

        $('#website-cover-file').change(function() {
            var fileName = $(this).val();
            if (fileName) {
                var fileExtension = fileName.split('.').pop().toLowerCase();
                if (fileExtension === 'jpg' || fileExtension === 'png') {
                    console.log('Valid image file selected.');
                    $("#website-cover-file").removeClass("is-invalid");
                    $("#website-cover").attr("src", window.URL.createObjectURL(this.files[0]));
                    WEBSITE_COVER_IMAGE = this.files[0];
                } else {
                    $("#website-cover").removeAttr("src");
                    $("#website-cover-file").addClass("is-invalid");
                    WEBSITE_COVER_IMAGE = "";
                }
            }
        });

        $('#website-about-us-image-file').change(function() {
            var fileName = $(this).val();
            if (fileName) {
                var fileExtension = fileName.split('.').pop().toLowerCase();
                if (fileExtension === 'jpg' || fileExtension === 'png') {
                    console.log('Valid image file selected.');
                    $("#website-about-us-image-file").removeClass("is-invalid");
                    $("#website-about-us-image").attr("src", window.URL.createObjectURL(this.files[0]));
                    WEBSITE_ABOUT_US_IMAGE = this.files[0];
                } else {
                    $("#website-about-us-image").removeAttr("src");
                    $("#website-about-us-image-file").addClass("is-invalid");
                    WEBSITE_ABOUT_US_IMAGE = "";
                }
            }
        });

        $('#website-login-image-file').change(function() {
            var fileName = $(this).val();
            if (fileName) {
                var fileExtension = fileName.split('.').pop().toLowerCase();
                if (fileExtension === 'jpg' || fileExtension === 'png') {
                    console.log('Valid image file selected.');
                    $("#website-login-image-file").removeClass("is-invalid");
                    $("#website-login-image").attr("src", window.URL.createObjectURL(this.files[0]));
                    WEBSITE_LOGIN_IMAGE = this.files[0];
                } else {
                    $("#website-login-image").removeAttr("src");
                    $("#website-login-image-file").addClass("is-invalid");
                    WEBSITE_LOGIN_IMAGE = "";
                }
            }
        });

        $("#form-update-system").on("submit", function(event) {
            event.preventDefault();
            var websiteName = $("#website-name").val();
            var websiteShortName = $("#website-short-name").val();
            var websiteTagline = $("#website-tagline").val();
            var websiteAboutUs = $("#website-about-us-description").val();
            var phone = $("#website-contact-number").val();
            var email = $("#website-contact-email").val();
            var address = $("#website-address").val();
            var startDay = $(".pbrc-operating-day-start").val();
            var startTime = $(".pbrc-operating-hour-start").val();
            var endDay = $(".pbrc-operating-day-end").val();
            var endTime = $(".pbrc-operating-hour-end").val();

            var formData = new FormData();
            // Loop through each file input
            $('[type="file"]').each(function(index, element) {
                var files = element.files;
                var inputId = $(element).attr('id');

                // Append each file to FormData with inputId as identifier
                for (var i = 0; i < files.length; i++) {
                    formData.append(inputId + '[]', files[i]);
                }
            });

            formData.append('action', "update-system-info");
            formData.append('website-name', websiteName);
            formData.append('website-short-name', websiteShortName);
            formData.append('website-tagline', websiteTagline);
            formData.append('website-about-us', websiteAboutUs);
            formData.append('phone', phone);
            formData.append('email', email);
            formData.append('address', address);
            formData.append('start-day', startDay);
            formData.append('start-time', startTime);
            formData.append('end-day', endDay);
            formData.append('end-time', endTime);
            console.log(formData);

            $.ajax({
                url: adminRequest(SYSTEM_URL),
                type: 'POST',
                data: formData,
                contentType: false,
                processData: false,
                success: function(response) {
                    console.log(response);
                    Swal.fire({
                        icon: 'success',
                        title: 'Successfully Updated!',
                        showConfirmButton: false,
                        timer: 1500 // Auto close after 1.5 seconds
                    });
                },
                error: function(error) {
                    console.error('Error:', error);
                }
            });
        });
    });
</script>